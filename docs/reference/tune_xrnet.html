<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>k-fold cross-validation for hierarchical regularized regression — tune_xrnet • xrnet</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="k-fold cross-validation for hierarchical regularized regression — tune_xrnet" />
<meta property="og:description" content="k-fold cross-validation for hierarchical regularized regression xrnet" />
<meta property="og:image" content="/logo.png" />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">xrnet</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/USCbiostats/xrnet">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>k-fold cross-validation for hierarchical regularized regression</h1>
    <small class="dont-index">Source: <a href='https://github.com/USCbiostats/xrnet/blob/master/R/tune_xrnet.R'><code>R/tune_xrnet.R</code></a></small>
    <div class="hidden name"><code>tune_xrnet.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>k-fold cross-validation for hierarchical regularized regression <code><a href='xrnet.html'>xrnet</a></code></p>
    </div>

    <pre class="usage"><span class='fu'>tune_xrnet</span>(
  <span class='no'>x</span>,
  <span class='no'>y</span>,
  <span class='kw'>external</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>unpen</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>family</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"gaussian"</span>, <span class='st'>"binomial"</span>),
  <span class='kw'>penalty_main</span> <span class='kw'>=</span> <span class='fu'><a href='define_penalty.html'>define_penalty</a></span>(),
  <span class='kw'>penalty_external</span> <span class='kw'>=</span> <span class='fu'><a href='define_penalty.html'>define_penalty</a></span>(),
  <span class='kw'>weights</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>standardize</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>TRUE</span>, <span class='fl'>TRUE</span>),
  <span class='kw'>intercept</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>TRUE</span>, <span class='fl'>FALSE</span>),
  <span class='kw'>loss</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"deviance"</span>, <span class='st'>"mse"</span>, <span class='st'>"mae"</span>, <span class='st'>"auc"</span>),
  <span class='kw'>nfolds</span> <span class='kw'>=</span> <span class='fl'>5</span>,
  <span class='kw'>foldid</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>parallel</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>control</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>()
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>predictor design matrix of dimension \(n x p\), matrix options include:</p><ul>
<li><p>matrix</p></li>
<li><p>big.matrix</p></li>
<li><p>filebacked.big.matrix</p></li>
<li><p>sparse matrix (dgCMatrix)</p></li>
</ul></td>
    </tr>
    <tr>
      <th>y</th>
      <td><p>outcome vector of length \(n\)</p></td>
    </tr>
    <tr>
      <th>external</th>
      <td><p>(optional) external data design matrix of dimension \(p x q\), matrix options include:</p><ul>
<li><p>matrix</p></li>
<li><p>sparse matrix (dgCMatrix)</p></li>
</ul></td>
    </tr>
    <tr>
      <th>unpen</th>
      <td><p>(optional) unpenalized predictor design matrix, matrix options include:</p><ul>
<li><p>matrix</p></li>
</ul></td>
    </tr>
    <tr>
      <th>family</th>
      <td><p>error distribution for outcome variable, options include:</p><ul>
<li><p>gaussian</p></li>
<li><p>binomial</p></li>
</ul></td>
    </tr>
    <tr>
      <th>penalty_main</th>
      <td><p>specifies regularization object for x. See <code><a href='define_penalty.html'>define_penalty</a></code> for more details.</p></td>
    </tr>
    <tr>
      <th>penalty_external</th>
      <td><p>specifies regularization object for external. See <code><a href='define_penalty.html'>define_penalty</a></code> for more details.
See <code><a href='define_penalty.html'>define_penalty</a></code> for more details.</p></td>
    </tr>
    <tr>
      <th>weights</th>
      <td><p>optional vector of observation-specific weights.
Default is 1 for all observations.</p></td>
    </tr>
    <tr>
      <th>standardize</th>
      <td><p>indicates whether x and/or external should be standardized.
Default is c(TRUE, TRUE).</p></td>
    </tr>
    <tr>
      <th>intercept</th>
      <td><p>indicates whether an intercept term is included for x and/or external.
Default is c(TRUE, FALSE).</p></td>
    </tr>
    <tr>
      <th>loss</th>
      <td><p>loss function for cross-validation. Options include:</p><ul>
<li><p>deviance</p></li>
<li><p>mse (Mean Squared Error)</p></li>
<li><p>mae (Mean Absolute Error)</p></li>
<li><p>auc (Area under the curve)</p></li>
</ul></td>
    </tr>
    <tr>
      <th>nfolds</th>
      <td><p>number of folds for cross-validation. Default is 5.</p></td>
    </tr>
    <tr>
      <th>foldid</th>
      <td><p>(optional) vector that identifies user-specified fold for each observation.
If NULL, folds are automatically generated.</p></td>
    </tr>
    <tr>
      <th>parallel</th>
      <td><p>use <code>foreach</code> function to fit folds in parallel if TRUE,
must register cluster (<code>doParallel</code>) before using.</p></td>
    </tr>
    <tr>
      <th>control</th>
      <td><p>specifies xrnet control object. See <code><a href='xrnet.control.html'>xrnet.control</a></code> for more details.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A list of class <code>tune_xrnet</code> with components</p>
<dt>cv_mean</dt><dd><p>mean cross-validated error for each penalty combination. Object returned is
a vector if there is no external data (external = NULL) and matrix if there is external data.</p></dd>
<dt>cv_sd</dt><dd><p>estimated standard deviation for cross-validated errorsObject returned is
a vector if there is no external data (external = NULL) and matrix if there is external data.</p></dd>
<dt>loss</dt><dd><p>loss function used to compute cross-validation error</p></dd>
<dt>opt_loss</dt><dd><p>the value of the loss function for the optimal cross-validated error</p></dd>
<dt>opt_penalty</dt><dd><p>first-level penalty value that achieves the optimal loss</p></dd>
<dt>opt_penalty_ext</dt><dd><p>second-level penalty value that achieves the optimal loss (if external data is present)</p></dd>
<dt>fitted_model</dt><dd><p>fitted xrnet object using all data, see <code><a href='xrnet.html'>xrnet</a></code> for details of object</p></dd>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>k-fold cross-validation is used to determine the 'optimal' combination of hyperparameter values, where
optimal is based on the optimal value obtained for the user-selected loss function across the k folds. To efficiently traverse all possible
combinations of the hyperparameter values, 'warm-starts' are used to traverse the penalty from largest
to smallest penalty value(s). Note that the penalty grid for the folds is generated
by fitting the model on the entire training data. Parallelization is enabled through the <code>foreach</code> and
<code>doParallel</code> R packages. To use parallelization, <code>parallel = TRUE</code>, you must first create the cluster
<code>makeCluster</code> and then register the cluster <code>registerDoParallel</code>. See the <code>parallel</code>, <code>foreach</code>,
and/or <code>doParallel</code> R packages for more details on how to setup parallelization.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'>## cross validation of hierarchical linear regression model</span>
<span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span>(<span class='no'>GaussianExample</span>)

<span class='co'>## 5-fold cross validation</span>
<span class='no'>cv_xrnet</span> <span class='kw'>&lt;-</span> <span class='fu'>tune_xrnet</span>(
    <span class='kw'>x</span> <span class='kw'>=</span> <span class='no'>x_linear</span>,
    <span class='kw'>y</span> <span class='kw'>=</span> <span class='no'>y_linear</span>,
    <span class='kw'>external</span> <span class='kw'>=</span> <span class='no'>ext_linear</span>,
    <span class='kw'>family</span> <span class='kw'>=</span> <span class='st'>"gaussian"</span>,
    <span class='kw'>control</span> <span class='kw'>=</span> <span class='fu'><a href='xrnet.control.html'>xrnet.control</a></span>(<span class='kw'>tolerance</span> <span class='kw'>=</span> <span class='fl'>1e-6</span>)
 )

 <span class='co'>## contour plot of cross-validated error</span>
 <span class='fu'><a href='https://rdrr.io/r/graphics/plot.html'>plot</a></span>(<span class='no'>cv_xrnet</span>)</div><div class='img'><img src='tune_xrnet-1.png' alt='' width='700' height='433' /></div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#value">Value</a></li>
      <li><a href="#details">Details</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Garrett Weaver.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


